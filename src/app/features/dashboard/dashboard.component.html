<div class="dashboard-container">
    <header class="dashboard-header">
      <div class="header-logo">
        <i class="icon-flame"></i>
        <h1>Panel de Control del Departamento de Bomberos</h1>
      </div>
      <div class="header-actions">
        <div class="badge badge-danger">
          <i class="icon-alert-triangle"></i>
          {{activeIncidents}} Incidentes Activos
        </div>
        <button class="btn btn-outline">
          <i class="icon-clock"></i>
          Última actualización: Justo ahora
        </button>
      </div>
    </header>
  
    <main class="dashboard-main">
      <div class="metrics-grid">
        <div class="card card-gradient">
          <div class="card-header">
            <h3 class="card-title">Incidentes Activos</h3>
            <i class="icon-flame"></i>
          </div>
          <div class="card-content">
            <div class="metric-value">{{activeIncidents}}</div>
            <p class="metric-description">2 residenciales, 1 comercial</p>
            <div class="card-actions">
              <button class="btn btn-danger btn-full">Ver Todos los Incidentes</button>
            </div>
          </div>
        </div>
  
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Tiempo Promedio de Respuesta</h3>
            <i class="icon-clock"></i>
          </div>
          <div class="card-content">
            <div class="metric-value">4.2 min</div>
            <p class="metric-description">-0.3 min respecto al mes pasado</p>
            <div class="progress-container">
              <div class="progress-bar" [style.width.%]="78"></div>
            </div>
            <p class="progress-description">78% del objetivo alcanzado</p>
          </div>
        </div>
  
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Unidades Disponibles</h3>
            <i class="icon-truck"></i>
          </div>
          <div class="card-content">
            <div class="metric-value">8/12</div>
            <p class="metric-description">4 unidades actualmente desplegadas</p>
            <div class="unit-grid">
              <div *ngFor="let unit of unitArray; let i = index" 
                   [ngClass]="{'unit-available': i < 8, 'unit-unavailable': i >= 8}">
              </div>
            </div>
          </div>
        </div>
  
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Personal en Servicio</h3>
            <i class="icon-users"></i>
          </div>
          <div class="card-content">
            <div class="metric-value">42/50</div>
            <p class="metric-description">8 posiciones sin cubrir</p>
            <div class="progress-container">
              <div class="progress-bar" [style.width.%]="84"></div>
            </div>
            <p class="progress-description">84% nivel de personal</p>
          </div>
        </div>
      </div>
      
      <div class="tabs-container">
        <div class="tabs-header">
          <button class="tab-button" [ngClass]="{'active': activeTab === 'map'}" (click)="setActiveTab('map')">Mapa de Incidentes</button>
          <button class="tab-button" [ngClass]="{'active': activeTab === 'stats'}" (click)="setActiveTab('stats')">Estadísticas</button>
          <button class="tab-button" [ngClass]="{'active': activeTab === 'weather'}" (click)="setActiveTab('weather')">Condiciones Meteorológicas</button>
        </div>
        
        <div class="tab-content" *ngIf="activeTab === 'map'">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Mapa de Incidentes Activos</h3>
              <p class="card-description">Vista en tiempo real de todos los incidentes activos en el área</p>
            </div>
            <div class="card-content no-padding">
              <div class="map-container">
                <div class="map-placeholder">
                  <div class="map-marker marker-1">
                    <i class="icon-map-pin"></i>
                    <span class="marker-badge">2</span>
                  </div>
                  <div class="map-marker marker-2">
                    <i class="icon-map-pin"></i>
                  </div>
                  <div class="map-unit unit-1">
                    <i class="icon-truck"></i>
                  </div>
                  <div class="map-unit unit-2">
                    <i class="icon-truck"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="incidents-grid">
            <div *ngFor="let incident of incidents; let i = index" 
                 class="card" [ngClass]="{'card-highlight': i === 0}">
              <div class="card-header">
                <div class="incident-header">
                  <h3 class="card-title">{{incident.type}}</h3>
                  <div class="badge" [ngClass]="{'badge-danger': incident.status === 'Active', 'badge-outline': incident.status !== 'Active'}">
                    {{incident.status}}
                  </div>
                </div>
                <p class="card-description">{{incident.location}}</p>
              </div>
              <div class="card-content">
                <div class="incident-details">
                  <div class="incident-detail">
                    <i class="icon-clock"></i>
                    <span>{{incident.time}}</span>
                  </div>
                  <div class="incident-detail">
                    <i class="icon-truck"></i>
                    <span>{{incident.units}} unidades</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="tab-content" *ngIf="activeTab === 'stats'">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Estadísticas Mensuales de Incidentes</h3>
              <p class="card-description">Resumen de incidentes por tipo y métricas de respuesta</p>
            </div>
            <div class="card-content">
              <div class="monthly-chart-container">
                <canvas baseChart
                  [type]="'bar'"
                  [data]="monthlyIncidentsChartData"
                  [options]="monthlyIncidentsChartOptions">
                </canvas>
              </div>
              <div class="stats-summary">
                <div class="stat-item">
                  <div class="stat-value">127</div>
                  <p class="stat-label">Total de Incidentes</p>
                </div>
                <div class="stat-item">
                  <div class="stat-value">4.5 min</div>
                  <p class="stat-label">Respuesta Prom.</p>
                </div>
                <div class="stat-item">
                  <div class="stat-value">92%</div>
                  <p class="stat-label">Tasa de Resolución</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="stats-grid">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Tipos de Incidentes</h3>
              </div>
              <div class="card-content">
                <div class="incident-types">
                  <div *ngFor="let type of incidentTypes" class="incident-type">
                    <div class="type-header">
                      <span>{{type.name}}</span>
                      <span class="type-count">{{type.count}}</span>
                    </div>
                    <div class="progress-container">
                      <div class="progress-bar" [style.width.%]="type.percentage"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Tendencias de Tiempo de Respuesta</h3>
              </div>
              <div class="card-content">
                <div class="chart-container">
                  <canvas baseChart
                    [type]="'line'"
                    [data]="responseTimeChartData"
                    [options]="responseTimeChartOptions">
                  </canvas>
                </div>
              </div>
            </div>
          </div>
        </div>
        

        <div class="tab-content" *ngIf="activeTab === 'weather'">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Condiciones Meteorológicas Actuales</h3>
              <p class="card-description">Factores climáticos que afectan el riesgo de incendio en la región</p>
            </div>
            <div class="card-content">
              <div class="weather-grid">
                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">Temperatura</h3>
                    <i class="icon-thermometer"></i>
                  </div>
                  <div class="card-content">
                    <div class="metric-value">32°C</div>
                    <p class="metric-description">+5° por encima del promedio</p>
                  </div>
                </div>
                
                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">Humedad</h3>
                    <i class="icon-cloud-rain"></i>
                  </div>
                  <div class="card-content">
                    <div class="metric-value">25%</div>
                    <p class="metric-description">Condiciones muy secas</p>
                  </div>
                </div>
                
                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">Velocidad del Viento</h3>
                    <i class="icon-wind"></i>
                  </div>
                  <div class="card-content">
                    <div class="metric-value">18 km/h</div>
                    <p class="metric-description">Dirección Noreste</p>
                  </div>
                </div>
                
                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">Riesgo de Incendio</h3>
                    <i class="icon-alert-triangle"></i>
                  </div>
                  <div class="card-content">
                    <div class="metric-value danger">Alto</div>
                    <p class="metric-description">Nivel 4 de 5</p>
                    <div class="progress-container danger-bg">
                      <div class="progress-bar danger" [style.width.%]="80"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Pronóstico de Riesgo de Incendio a 5 Días</h3>
            </div>
            <div class="card-content">
              <div class="forecast-grid">
                <div *ngFor="let day of forecast" class="forecast-day">
                  <div class="day-name">{{day.day}}</div>
                  <div class="risk-indicator" [ngClass]="getRiskClass(day.risk)">
                    <i class="icon-alert-triangle"></i>
                  </div>
                  <div class="risk-level">{{day.risk}}</div>
                  <div class="day-temp">{{day.temp}}°C</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>